const swaggerUi = require('swagger-ui-express')
const YAML = require('yamljs')
const path = require('path')
const dirPath = path.join(__dirname, '../docs/openapi.yml')
const openApiDocumentation = YAML.load(dirPath)

const CveController = require('./controller/cve.controller')
const OrgController = require('./controller/org.controller')
const CveIdController = require('./controller/cve-id.controller')
const SystemController = require('./controller/system.controller')
const UserController = require('./controller/user.controller')

module.exports = async function configureRoutes (app) {
  app.use('/api/', CveController)
  app.use('/api/', OrgController)
  app.use('/api/', CveIdController)
  app.use('/api/', SystemController)
  app.use('/api/', UserController)
  app.use('/api-docs', swaggerUi.serve, swaggerUi.setup(openApiDocumentation))
}
